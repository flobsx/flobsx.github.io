"use strict";(self.webpackChunkpersonal_blog=self.webpackChunkpersonal_blog||[]).push([[577],{5530:n=>{n.exports=JSON.parse('{"blogPosts":[{"id":"/2024/01/16/docusaurus-setup-github-pages","metadata":{"permalink":"/blog/blog/2024/01/16/docusaurus-setup-github-pages","editUrl":"https://github.com/flobsx/personal-blog/tree/main/blog/2024-01-16-docusaurus-setup-github-pages/index.md","source":"@site/blog/2024-01-16-docusaurus-setup-github-pages/index.md","title":"Blog personnel avec Docusaurus, Github Pages + Actions","description":"L\'objectif est de publier un blog sur Github Pages en utilisant Docusaurus et un d\xe9ploiement automatique.","date":"2024-01-16T00:00:00.000Z","formattedDate":"16 janvier 2024","tags":[{"label":"docusaurus","permalink":"/blog/blog/tags/docusaurus"},{"label":"github","permalink":"/blog/blog/tags/github"}],"readingTime":1.945,"hasTruncateMarker":true,"authors":[{"name":"Florent B.","title":"Consultant IT Senior","url":"https://github.com/flobsx","imageURL":"https://github.com/flobsx.png","key":"flobsx"}],"frontMatter":{"title":"Blog personnel avec Docusaurus, Github Pages + Actions","authors":"flobsx","tags":["docusaurus","github"]},"unlisted":false},"content":"L\'objectif est de publier un blog sur Github Pages en utilisant Docusaurus et un d\xe9ploiement automatique.\\nAfin de garder priv\xe9e les Issues et Pull Request, j\'utilise deux d\xe9p\xf4ts distincts :\\n- personal-blog: D\xe9p\xf4t priv\xe9 contenant les sources, les actions, les issues et PR\\n- flobsx.github.io: Le D\xe9p\xf4t public automatiquement reconstruit lors des update de personal-blog\\n\\n\x3c!--truncate--\x3e\\n\\n### Pr\xe9requis\\n\\nInstaller :\\n- Node JS\\n- Git\\n- GH\\n\\n# Cr\xe9er le projet Docusaurus\\n```bash\\nnpx create-docusaurus@latest personal-blog classic\\ncd personal-blog\\nnpm i\\n\\ngit init\\ngit add .\\ngit commit -m \\"first commit\\"\\ngit barnch -M main\\ngit remote add origin https://github.com/flobsx/personal-blog.git\\ngit push -u origin main\\n\\ncode .\\n```\\n\\n# Modifier la configuration\\nOuvrir le fichier `docusaurus.config.js`\\n```js\\nconst config = {\\n  title: \'flobsx dev blog\',\\n  tagline: \'Vers l\\\\\'infini et puis voil\xe0 \ud83d\ude80\',\\n  favicon: \'img/favicon.ico\',\\n\\n  // Set the production url of your site here\\n  url: \'https://flobsx.github.io\',\\n  // Set the /<baseUrl>/ pathname under which your site is served\\n  // For GitHub pages deployment, it is often \'/<projectName>/\'\\n  baseUrl: \'/\',\\n\\n  // GitHub pages deployment config.\\n  // If you aren\'t using GitHub pages, you don\'t need these.\\n  organizationName: \'flobsx\', // Usually your GitHub org/user name.\\n  projectName: \'flobsx.github.io\', // Usually your repo name.\\n  deploymentBranch: \'gh-pages\',\\n  trailingSlash: true,\\n  [...]\\n```\\n\\n# D\xe9ploiement automatique sur d\xe9p\xf4t distant\\n\\nPr\xe9parer les cl\xe9s de d\xe9ploiement :\\n```bash\\nssh-keygen -t ed25519 -C \\"flobsx@gmail.com\\"\\ngh auth refresh -h github.com -s admin:public_key\\ngh repo deploy-key add ~/.ssh/id_ed25519.pub --allow-write --title \\"gh-action-deploy\\" --repo flobsx/flobsx.github.io\\ngh secret set GH_PAGES_DEPLOY -R flobsx/personal-blog < ~/.ssh/id_ed25519\\n```\\n\\nCr\xe9er le workflow :\\n```bash\\nmkdir .github\\nmkdir .github/workflows\\ncode .github/workflows/deploy.yml\\n```\\n\\n```yml\\nname: Deploy to GitHub Pages\\n\\non:\\n  pull_request:\\n    branches: [main]\\n  push:\\n    branches: [main]\\n\\npermissions:\\n  contents: write\\n\\njobs:\\n  test-deploy:\\n    if: github.event_name != \'push\'\\n    runs-on: ubuntu-latest\\n    steps:\\n      - uses: actions/checkout@v3\\n      - uses: actions/setup-node@v3\\n        with:\\n          node-version: 18\\n          cache: yarn\\n      - name: Install dependencies\\n        run: yarn install --frozen-lockfile\\n      - name: Test build website\\n        run: yarn build\\n  deploy:\\n    if: github.event_name != \'pull_request\'\\n    runs-on: ubuntu-latest\\n    steps:\\n      - uses: actions/checkout@v3\\n      - uses: actions/setup-node@v3\\n        with:\\n          node-version: 18\\n          cache: yarn\\n      - uses: webfactory/ssh-agent@v0.5.0\\n        with:\\n          ssh-private-key: ${{ secrets.GH_PAGES_DEPLOY }}\\n      - name: Deploy to GitHub Pages\\n        env:\\n          USE_SSH: true\\n        run: |\\n          git config --global user.email \\"flobsx@gmail.com\\"\\n          git config --global user.name \\"flobsx\\"\\n          yarn install --frozen-lockfile\\n          yarn deploy\\n```\\n\\n# Finalisation\\n\\n```bash\\nyarn install\\nGIT_USER=flobsx yarn deploy\\n\\ngit add .\\ngit commit -m \\"ready to deploy\\"\\ngit push -u origin main\\n```"}]}')}}]);